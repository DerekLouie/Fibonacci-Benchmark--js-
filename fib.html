<!DOCTYPE html>
<!--[if lte IE 6]><html class="preIE7 preIE8 preIE9"><![endif]-->
<!--[if IE 7]><html class="preIE8 preIE9"><![endif]-->
<!--[if IE 8]><html class="preIE9"><![endif]-->
<!--[if gte IE 9]><!--><html><!--<![endif]-->
 <head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>For Amir</title>
  <meta name="Derek" content="Fibonacci Performance">
  <link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/css/bootstrap-combined.min.css" rel="stylesheet">
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js" type="text/javascript"></script>
  <script type="text/javascript">


function timingFunction(n) {

    var start2 = new Date();
    fibwithcache(n);
    var stop2 = new Date();
    var executionTime2 = stop2 - start2;
    var start1 = new Date();
    fibslow(n);
    var stop1 = new Date();
    var executionTime1 = stop1 - start1;
    //alert("Fibonacci executed in " + executionTime + " milliseconds");
    

    $(".cache").html("Your Cache: "+JSON.stringify(thecache));
    $(".answer").html("Answer: "+thecache[n]);
    $("#wcache").html(executionTime2 );
    $("#wocache").html(executionTime1 );
    if(n > 29) {$(".note").html("* NOTE: As you will soon notice, the order of magnitude a cache improves this by is exponential. I think something like 40 billion calculations <br/> used to calculate the 50th fib number  without a cache is brought down to 99 calculations, so it is quite an increase in performance!")}

}


  function fibslow(n) {
  if (n == 0) {return n;}
  else if (n == 1 ) {return n; }
  else {return fibslow(n-1)+fibslow(n-2)}
  }   
  function fibwithcache(n)
  {
    if (n == 0) {
      return n;}
    else if (n == 1 ) {
      return n;}
    else if(thecache[n] == undefined) 
    { thecache[n] = fibwithcache(n-1)+fibwithcache(n-2);
      
      return thecache[n];
    } 
    else 
    {   
      return thecache[n];  
    }
    
 }
  </script>
 </head>
 <body>
  <script type="text/javascript">
   thecache = {"0":0,"1":1};
  </script>
  <div style="margin:10px;">
<form>
  <fieldset>
    <legend>Fibonacci Performance</legend>
    <label>Input Number: </label>
    <input id="fibnum" type="text" placeholder= "around 30 it gets interesting.."><br/>
    <div class="btn" onclick="timingFunction($('#fibnum')[0].value)">Submit</div>
  </fieldset>
</form>
  </div>

  <div style="margin:10px;">
    <blockquote>
  <p> <div class="cache"> <script> if (jQuery.isEmptyObject(thecache)) { document.write("Empty Cache")} else { document.write("Your Cache: "+JSON.stringify(thecache)); }
</script> </div></p>
</blockquote>
<br/>
<h1 class = "answer" >   </h1> <br/><br/>
<div>
<table class="table">
Benchmark in Milliseconds
<thread>
<tr> 
  <th> With cache: <div id = "wcache" > </div> </th>
  <th> Without Cache: <div id = "wocache" > </div> </th>
<tr>
</thread>
</table >
<div class= "note" >

</div>
</div>
  </div>
 </body>
</html>